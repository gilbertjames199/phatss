"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5172],{5172:(e,t,o)=>{o.r(t),o.d(t,{default:()=>S});var r=o(821),n={class:"relative row gap-20 masonry pos-r"},i={class:"peers fxw-nw jc-sb ai-c"},a=(0,r.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-x-lg",viewBox:"0 0 16 16"},[(0,r.createElementVNode)("path",{"fill-rule":"evenodd",d:"M13.854 2.146a.5.5 0 0 1 0 .708l-11 11a.5.5 0 0 1-.708-.708l11-11a.5.5 0 0 1 .708 0Z"}),(0,r.createElementVNode)("path",{"fill-rule":"evenodd",d:"M2.146 2.146a.5.5 0 0 0 0 .708l11 11a.5.5 0 0 0 .708-.708l-11-11a.5.5.5 0 0 0-.708 0Z"})],-1),l={class:"row"},s={class:"col-md-4"},c=(0,r.createElementVNode)("label",{for:"issue"},"Issue Description",-1),u={key:0,class:"fs-6 c-red-500"},d=(0,r.createElementVNode)("label",{for:"municipality"},"Municipality",-1),m=(0,r.createElementVNode)("option",null,null,-1),p={key:1,class:"fs-6 c-red-500"},f=(0,r.createElementVNode)("label",{for:"barangay"},"Barangay",-1),g=(0,r.createElementVNode)("option",null,null,-1),h={key:2,class:"fs-6 c-red-500"},y=(0,r.createElementVNode)("label",null,"Location",-1),k={class:"location-inputs"},v={key:0,class:"fs-6 c-red-500"},b={key:1,class:"fs-6 c-red-500"},V=["disabled"],E={class:"col-md-7 position-relative"},L={class:"position-relative"},N={key:0,class:"list-group position-absolute bg-white w-100 shadow p-2",style:{"max-height":"200px","overflow-y":"auto","z-index":"1050"}},B=["onClick"],w=(0,r.createElementVNode)("div",{id:"map",style:{height:"400px",position:"relative","z-index":"1"}},null,-1);var x=o(9038),D=o(5243),M=o.n(D);o(5817);const C={props:{editData:Object,barangays:Object},data:function(){return{form:(0,x.cI)({issue:"",municipality:"",barangay:"",Latitude:"",Longitude:""}),title:"",my_barangays:[],searchQuery:"",suggestions:[]}},mounted:function(){void 0!==this.editData?this.title="Edit Reported":this.title="Report",this.initMap()},methods:{submit:function(){this.form.post("store")},filterBarangay:function(){var e=this;this.my_barangays=this.barangays.filter((function(t){return t.municipality===e.form.municipality})).map((function(e){return e.barangay}))},getMyLocation:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e.form.Latitude=t.coords.latitude,e.form.Longitude=t.coords.longitude,e.updateMap(t.coords.latitude,t.coords.longitude)}),(function(e){alert("Geolocation failed: "+e.message)})):alert("Geolocation is not supported by this browser.")},searchLocation:function(){var e=this;if(this.searchQuery){var t="https://api.locationiq.com/v1/autocomplete.php?key=pk.2070cb3dbf9066600306adad278707a2&q=".concat(this.searchQuery,"&format=json");fetch(t).then((function(e){return e.json()})).then((function(t){e.suggestions=t}))}else this.suggestions=[]},selectLocation:function(e){this.form.Latitude=e.lat,this.form.Longitude=e.lon,this.updateMap(e.lat,e.lon),this.suggestions=[],this.searchQuery=e.display_name},initMap:function(){var e=this;this.map=M().map("map").setView([7.5756885354107695,125.99275278527455],15),M().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(this.map),this.marker=M().marker([7.5756885354107695,125.99275278527455]).addTo(this.map),this.map.on("click",(function(t){var o=t.latlng,r=o.lat,n=o.lng;e.form.Latitude=r,e.form.Longitude=n,e.updateMap(r,n)}))},updateMap:function(e,t){this.map.setView([e,t],15),this.marker?this.marker.setLatLng([e,t]):this.marker=M().marker([e,t]).addTo(this.map)}}};const S=(0,o(3744).Z)(C,[["render",function(e,t,o,x,D,M){var C=(0,r.resolveComponent)("Link");return(0,r.openBlock)(),(0,r.createElementBlock)("div",n,[(0,r.createElementVNode)("div",i,[(0,r.createElementVNode)("h3",null,(0,r.toDisplayString)(D.title)+" Sanitation Issue",1),(0,r.createVNode)(C,{href:"/reports"},{default:(0,r.withCtx)((function(){return[a]})),_:1})]),(0,r.createElementVNode)("div",l,[(0,r.createElementVNode)("div",s,[(0,r.createElementVNode)("form",{onSubmit:t[6]||(t[6]=(0,r.withModifiers)((function(e){return M.submit()}),["prevent"]))},[c,(0,r.withDirectives)((0,r.createElementVNode)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return D.form.issue=e}),class:"form-control",required:""},null,512),[[r.vModelText,D.form.issue]]),D.form.errors.issue?((0,r.openBlock)(),(0,r.createElementBlock)("div",u,(0,r.toDisplayString)(D.form.errors.issue),1)):(0,r.createCommentVNode)("",!0),d,(0,r.withDirectives)((0,r.createElementVNode)("select",{class:"form-control",onChange:t[1]||(t[1]=function(e){return M.filterBarangay()}),"onUpdate:modelValue":t[2]||(t[2]=function(e){return D.form.municipality=e}),required:""},[m,((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(e.municipalities_global,(function(e){return(0,r.openBlock)(),(0,r.createElementBlock)("option",{key:e},(0,r.toDisplayString)(e),1)})),128))],544),[[r.vModelSelect,D.form.municipality]]),D.form.errors.municipality?((0,r.openBlock)(),(0,r.createElementBlock)("div",p,(0,r.toDisplayString)(D.form.errors.municipality),1)):(0,r.createCommentVNode)("",!0),f,(0,r.withDirectives)((0,r.createElementVNode)("select",{class:"form-control","onUpdate:modelValue":t[3]||(t[3]=function(e){return D.form.barangay=e}),required:""},[g,((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(D.my_barangays,(function(e){return(0,r.openBlock)(),(0,r.createElementBlock)("option",{key:e},(0,r.toDisplayString)(e),1)})),128))],512),[[r.vModelSelect,D.form.barangay]]),D.form.errors.barangay?((0,r.openBlock)(),(0,r.createElementBlock)("div",h,(0,r.toDisplayString)(D.form.errors.barangay),1)):(0,r.createCommentVNode)("",!0),y,(0,r.createElementVNode)("div",k,[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=function(e){return D.form.Latitude=e}),class:"form-control",placeholder:"Latitude",required:"",readonly:""},null,512),[[r.vModelText,D.form.Latitude]]),D.form.errors.Latitude?((0,r.openBlock)(),(0,r.createElementBlock)("div",v,(0,r.toDisplayString)(D.form.errors.Latitude),1)):(0,r.createCommentVNode)("",!0),(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=function(e){return D.form.Longitude=e}),class:"form-control",placeholder:"Longitude",required:"",readonly:""},null,512),[[r.vModelText,D.form.Longitude]]),D.form.errors.Longitude?((0,r.openBlock)(),(0,r.createElementBlock)("div",b,(0,r.toDisplayString)(D.form.errors.Longitude),1)):(0,r.createCommentVNode)("",!0)]),(0,r.createElementVNode)("button",{type:"submit",class:"btn btn-primary mt-3 text-white",disabled:D.form.processing},"Submit Report",8,V)],32)]),(0,r.createElementVNode)("div",E,[(0,r.createElementVNode)("div",L,[(0,r.withDirectives)((0,r.createElementVNode)("input",{type:"text","onUpdate:modelValue":t[7]||(t[7]=function(e){return D.searchQuery=e}),onInput:t[8]||(t[8]=function(){return M.searchLocation&&M.searchLocation.apply(M,arguments)}),placeholder:"Search location...",class:"form-control mb-2 position-relative",style:{"z-index":"1050"}},null,544),[[r.vModelText,D.searchQuery]]),D.suggestions.length?((0,r.openBlock)(),(0,r.createElementBlock)("ul",N,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(D.suggestions,(function(e,t){return(0,r.openBlock)(),(0,r.createElementBlock)("li",{key:t,onClick:function(t){return M.selectLocation(e)},class:"list-group-item list-group-item-action"},(0,r.toDisplayString)(e.display_name),9,B)})),128))])):(0,r.createCommentVNode)("",!0)]),w])])])}]])}}]);