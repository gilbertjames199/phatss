"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4542],{6333:(e,t,n)=>{n.d(t,{Z:()=>o});var a=n(3645),r=n.n(a)()((function(e){return e[1]}));r.push([e.id,".mapdiv[data-v-2be9f173]{height:500px;width:100%}",""]);const o=r},4542:(e,t,n)=>{n.r(t),n.d(t,{default:()=>U});var a=n(821),r=function(e){return(0,a.pushScopeId)("data-v-2be9f173"),e=e(),(0,a.popScopeId)(),e},o=r((function(){return(0,a.createElementVNode)("h1",null,"Heat Map",-1)})),l={class:"row gap-20 masonry pos-r"},i={class:"masonry-item w-100"},s={class:"row gap-20"},c=r((function(){return(0,a.createElementVNode)("div",{class:"col-md-9"},[(0,a.createElementVNode)("div",{class:"layers bd bgc-white p-20"},[(0,a.createElementVNode)("div",{id:"leafletMapid",class:"mapdiv border border-dark"})])],-1)})),u={class:"col-md-3"},m={class:"layers bd bgc-white p-20"},h={class:"layer w-100 mB-10"},p=r((function(){return(0,a.createElementVNode)("h4",null,[(0,a.createTextVNode)("FILTERS"),(0,a.createElementVNode)("br")],-1)})),d=r((function(){return(0,a.createElementVNode)("hr",null,null,-1)})),g=r((function(){return(0,a.createElementVNode)("b",null,"Municipality:",-1)})),f=(0,a.createTextVNode)("   "),b=r((function(){return(0,a.createElementVNode)("option",null,null,-1)})),v=(0,a.createTextVNode)("   "),_=r((function(){return(0,a.createElementVNode)("b",null,"Barangays: ",-1)})),y=r((function(){return(0,a.createElementVNode)("option",null,null,-1)})),E=(0,a.createTextVNode)("   "),N=r((function(){return(0,a.createElementVNode)("b",null,"Puroks: ",-1)})),V=r((function(){return(0,a.createElementVNode)("option",null,null,-1)})),k=(0,a.createTextVNode)("   "),w=r((function(){return(0,a.createElementVNode)("b",null,"Type: ",-1)})),O=[r((function(){return(0,a.createElementVNode)("option",null,null,-1)})),r((function(){return(0,a.createElementVNode)("option",null,"G0",-1)})),r((function(){return(0,a.createElementVNode)("option",null,"G1",-1)})),r((function(){return(0,a.createElementVNode)("option",null,"G2",-1)})),r((function(){return(0,a.createElementVNode)("option",null,"G3",-1)}))],x=r((function(){return(0,a.createElementVNode)("br",null,null,-1)})),L=r((function(){return(0,a.createElementVNode)("hr",null,null,-1)})),S=r((function(){return(0,a.createElementVNode)("h4",null,"Additional Details",-1)})),D=r((function(){return(0,a.createElementVNode)("b",null,"Count: ",-1)})),M=(0,a.createTextVNode)();var j=n(974),B=n.n(j),C=n(5243),F=n.n(C);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const A={components:{},props:{count:String,p_mun:String,p_bar:String,p_pur:String,p_relrisk:String,p_data:Object,barangays:Object,municipalities:Object,puroks:Object,g0:Object,g1:Object,g2:Object,g3:Object},data:function(){return{myData:{max:1e4,data:this.$props.p_data,lat_val:0,lng_val:0},myData0:{max:1e4,data:this.$props.g0,lat_val:0,lng_val:0},myData1:{max:1e4,data:this.$props.g1,lat_val:0,lng_val:0},myData2:{max:1e4,data:this.$props.g2,lat_val:0,lng_val:0},myData3:{max:1e4,data:this.$props.g3,lat_val:0,lng_val:0},baseLayer:null,heatmapLayer:null,heatmapLayer1:null,map:null,mun:this.$props.p_mun,bar:this.$props.p_bar,relrisk:this.$props.p_relrisk,pur:this.$props.p_pur,home_lang:null,home_lat:null}},watch:{},computed:{},mounted:function(){this.initMap()},methods:{getLocation:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e.lat_val=t.coords.latitude,e.lng_val=t.coords.longitude,e.initMap()})):alert("Geolocation is not supported by this browser.")},initMap:function(){if(this.getLocation(),0!=this.lat_val&&0!=this.lng_val){this.baseLayer=F().tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://cloudmade.com">CloudMade</a>',maxZoom:18,minZoom:0});var e={radius:10,blur:1,maxOpacity:.5,scaleRadius:!1,useLocalExtrema:!0,latField:"x",lngField:"y",valueField:"count"};this.heatmapLayer=new(B())(e);var t=P(P({},e),{},{gradient:{.4:"lightblue",.6:"blue",.9:"darkblue"}});this.heatmapLayer1=new(B())(t),this.home_lat=7.6165921,this.home_lang=126.0364403;var n=9;this.mun&&(this.setCoords(),n=11),this.map=new(F().map)("leafletMapid",{center:new(F().LatLng)(this.home_lat,this.home_lang),zoom:n}),this.heatmapLayer&&this.map.removeLayer(this.heatmapLayer),this.heatmapLayer.setData(this.myData),this.baseLayer.addTo(this.map),this.heatmapLayer.addTo(this.map),this.addHoverTooltips()}},filter_me:function(e){"mun"===e&&(this.bar="",this.pur=""),"bar"===e&&(this.pur=""),this.$inertia.get("/map/heat",{mun:this.mun,bar:this.bar,pur:this.pur,relrisk:this.relrisk},{preserveScroll:!0,preserveState:!0,replace:!0,onSuccess:function(){window.location.reload()}})},clearFilter:function(){this.mun="",this.bar="",this.pur="",this.relrisk="",this.filter_me("")},addHoverTooltips:function(){var e=this;this.myData.data.forEach((function(t){var n=F().circleMarker([t.x,t.y],{radius:5,color:"transparent",fillOpacity:0}),a='\n                <div style="text-align: left; font-size: 14px; line-height: 1.5;">\n                    <strong>Name:</strong> <u>'.concat(t.name||"N/A","</u><br>\n                    <strong>Address:</strong> <u>").concat(t.address||"N/A","</u><br>\n                    <strong>Coordinates:</strong> <u>(").concat(t.x.toFixed(6),", ").concat(t.y.toFixed(6),")</u><br>\n                    <strong>Relative Risk Assessment:</strong><u>").concat(t.relative_risk_assessment,"</u>\n                </div>\n            ");n.bindTooltip(a,{permanent:!1,direction:"top"}),n.addTo(e.map)}))},setCoords:function(){"Compostela"==this.mun&&(this.home_lat=7.666,this.home_lang=126.0847),"Laak"==this.mun&&(this.home_lat=7.8771,this.home_lang=125.7844),"Mabini"==this.mun&&(this.home_lat=7.2821,this.home_lang=125.8574),"Maco"==this.mun&&(this.home_lat=7.3593,this.home_lang=125.858),"Maragusan"==this.mun&&(this.home_lat=7.3522,this.home_lang=126.1545),"Mawab"==this.mun&&(this.home_lat=7.4969,this.home_lang=125.9588),"Monkayo"==this.mun&&(this.home_lat=7.8514,this.home_lang=126.0458),"Montevista"==this.mun&&(this.home_lat=7.7305,this.home_lang=125.9806),"Nabunturan"==this.mun&&(this.home_lat=7.6038,this.home_lang=125.9632),"New Bataan"==this.mun&&(this.home_lat=7.5547,this.home_lang=126.1404),"Pantukan"==this.mun&&(this.home_lat=7.17728,this.home_lang=126.02043)}}};var Z=n(3379),G=n.n(Z),I=n(6333),R={insert:"head",singleton:!1};G()(I.Z,R);I.Z.locals;const U=(0,n(3744).Z)(A,[["render",function(e,t,n,r,j,B){return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[o,(0,a.createElementVNode)("div",l,[(0,a.createElementVNode)("div",i,[(0,a.createElementVNode)("div",s,[c,(0,a.createElementVNode)("div",u,[(0,a.createElementVNode)("div",m,[(0,a.createElementVNode)("div",h,[p,d,g,f,(0,a.withDirectives)((0,a.createElementVNode)("select",{class:"form-control","onUpdate:modelValue":t[0]||(t[0]=function(e){return j.mun=e}),onChange:t[1]||(t[1]=function(e){return B.filter_me("mun")})},[b,((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(n.municipalities,(function(e){return(0,a.openBlock)(),(0,a.createElementBlock)("option",null,(0,a.toDisplayString)(e),1)})),256))],544),[[a.vModelSelect,j.mun]]),v,_,(0,a.withDirectives)((0,a.createElementVNode)("select",{class:"form-control","onUpdate:modelValue":t[2]||(t[2]=function(e){return j.bar=e}),onChange:t[3]||(t[3]=function(e){return B.filter_me("bar")})},[y,((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(n.barangays,(function(e){return(0,a.openBlock)(),(0,a.createElementBlock)("option",null,(0,a.toDisplayString)(e),1)})),256))],544),[[a.vModelSelect,j.bar]]),E,N,(0,a.withDirectives)((0,a.createElementVNode)("select",{class:"form-control","onUpdate:modelValue":t[4]||(t[4]=function(e){return j.pur=e}),onChange:t[5]||(t[5]=function(e){return B.filter_me("pur")})},[V,((0,a.openBlock)(!0),(0,a.createElementBlock)(a.Fragment,null,(0,a.renderList)(n.puroks,(function(e){return(0,a.openBlock)(),(0,a.createElementBlock)("option",null,(0,a.toDisplayString)(e),1)})),256))],544),[[a.vModelSelect,j.pur]]),k,w,(0,a.withDirectives)((0,a.createElementVNode)("select",{class:"form-control","onUpdate:modelValue":t[6]||(t[6]=function(e){return j.relrisk=e}),onChange:t[7]||(t[7]=function(e){return B.filter_me("relrisk")})},O,544),[[a.vModelSelect,j.relrisk]]),x,(0,a.createElementVNode)("button",{class:"btn btn-danger text-white",onClick:t[8]||(t[8]=function(){return B.clearFilter&&B.clearFilter.apply(B,arguments)})},"Clear Filters"),L,(0,a.createElementVNode)("span",null,[S,D,M,(0,a.createElementVNode)("u",null,(0,a.toDisplayString)(e.format_number(n.count,0,!0)),1)])])])])])])])],64)}],["__scopeId","data-v-2be9f173"]])}}]);