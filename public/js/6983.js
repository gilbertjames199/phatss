"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6983],{9184:(e,t,o)=>{o.d(t,{Z:()=>l});var n=o(3645),a=o.n(n)()((function(e){return e[1]}));a.push([e.id,"#app,body,html{box-sizing:border-box;height:100%;margin:0;padding:0;width:100%}.map{height:100vh;position:relative;width:100%}@media (max-width:768px){.map{height:80vh;height:70vh;width:100%}}.suggestions{background-color:#fff;border:1px solid #ccc;list-style:none;margin:0;max-height:150px;overflow-y:auto;padding:0}.suggestions li{cursor:pointer;padding:8px}.suggestions li:hover{background-color:#f0f0f0}",""]);const l=a},7428:(e,t,o)=>{o.d(t,{Z:()=>l});var n=o(3645),a=o.n(n)()((function(e){return e[1]}));a.push([e.id,".modal[data-v-b5ea9d40]{display:block}",""]);const l=a},6983:(e,t,o)=>{o.r(t),o.d(t,{default:()=>R});var n=o(821),a={class:"relative row gap-20 masonry pos-r"},l={class:"peers fxw-nw jc-sb ai-c"},r=(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-x-lg",viewBox:"0 0 16 16"},[(0,n.createElementVNode)("path",{"fill-rule":"evenodd",d:"M13.854 2.146a.5.5 0 0 1 0 .708l-11 11a.5.5 0 0 1-.708-.708l11-11a.5.5 0 0 1 .708 0Z"}),(0,n.createElementVNode)("path",{"fill-rule":"evenodd",d:"M2.146 2.146a.5.5 0 0 0 0 .708l11 11a.5.5 0 0 0 .708-.708l-11-11a.5.5 0 0 0-.708 0Z"})],-1),i={class:"row"},s={class:"col-md-5"},c=(0,n.createElementVNode)("label",{for:"issue"},"Issue Description",-1),d={key:0,class:"fs-6 c-red-500"},u=(0,n.createElementVNode)("label",{for:"municipality"},"Municipality",-1),m=(0,n.createElementVNode)("option",null,null,-1),p=(0,n.createElementVNode)("label",{for:"barangay"},"Barangay",-1),f=(0,n.createElementVNode)("option",null,null,-1),g=(0,n.createElementVNode)("label",null,"Location",-1),h={class:"location-inputs"},y=["disabled"],b={class:"col-md-4"},v={key:0,class:"list-group position-absolute bg-white w-100"},E=["onClick"],V=(0,n.createElementVNode)("div",{id:"map",style:{height:"400px"}},null,-1);var k=o(9038),N=function(e){return(0,n.pushScopeId)("data-v-b5ea9d40"),e=e(),(0,n.popScopeId)(),e},w={class:"permissions-modal"},M={class:"modal",tabindex:"-1",role:"dialog"},x={class:"modal-dialog modal-xl"},B={class:"d-flex justify-content-center"},C={class:"modal-content",style:{width:"100% !important",height:"40% !important"}},L={class:"modal-header",style:{"background-color":"#030014"}},S={class:"modal-title",style:{color:"#ffe819","text-align":"center !important"}},D=[N((function(){return(0,n.createElementVNode)("span",{"aria-hidden":"true"},"Ã—",-1)}))],Z={class:"modal-body"},_=N((function(){return(0,n.createElementVNode)("div",{class:"modal-footer",style:{"background-color":"#090137"}},null,-1)}));const I={props:{title:String},data:function(){return{value:null}},mounted:function(){},methods:{logU_ID:function(){},closeModal:function(){this.$emit("close-modal-event")},saveChanges:function(){this.closeModal()},loadPermissions:function(){}}};var T=o(3379),U=o.n(T),j=o(7428),q={insert:"head",singleton:!1};U()(j.Z,q);j.Z.locals;var F=o(3744);const G=(0,F.Z)(I,[["render",function(e,t,o,a,l,r){return(0,n.openBlock)(),(0,n.createElementBlock)("div",w,[(0,n.createElementVNode)("div",M,[(0,n.createElementVNode)("div",x,[(0,n.createElementVNode)("div",B,[(0,n.createElementVNode)("div",C,[(0,n.createElementVNode)("div",L,[(0,n.createElementVNode)("h4",S,[(0,n.createElementVNode)("b",null,(0,n.toDisplayString)(o.title),1)]),(0,n.createElementVNode)("button",{type:"button",class:"btn btn-danger",style:{"font-weight":"bold",color:"white"},"data-dismiss":"modal","aria-label":"Close",onClick:t[0]||(t[0]=function(){return r.closeModal&&r.closeModal.apply(r,arguments)})},D)]),(0,n.createElementVNode)("div",Z,[(0,n.renderSlot)(e.$slots,"default",{},void 0,!0)]),_])])])])])}],["__scopeId","data-v-b5ea9d40"]]);var Q=o(5243),z=o.n(Q);o(5817);const P={props:{barangays:Object},data:function(){return{form:(0,k.cI)({issue:"",municipality:"",barangay:"",latitude:"",longitude:""}),my_barangays:[],searchQuery:"",suggestions:[]}},components:{MapModal:G},mounted:function(){this.initMap()},methods:{submit:function(){this.form.post("/reports")},filterBarangay:function(){var e=this;this.my_barangays=this.barangays.filter((function(t){return t.municipality===e.form.municipality})).map((function(e){return e.barangay}))},searchLocation:function(){var e=this;if(this.searchQuery){var t="https://nominatim.openstreetmap.org/search?format=json&q=".concat(this.searchQuery);fetch(t).then((function(e){return e.json()})).then((function(t){e.suggestions=t}))}else this.suggestions=[]},getMyLocation:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e.form.latitude=t.coords.latitude,e.form.longitude=t.coords.longitude}),(function(e){alert("Geolocation failed: "+e.message)})):alert("Geolocation is not supported by this browser.")},initMap:function(){var e=this;this.map=z().map("map").setView([12.8797,121.774],6),z().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(this.map),this.marker=z().marker([12.8797,121.774]).addTo(this.map);z().Control.geocoder({defaultMarkGeocode:!1}).on("markgeocode",(function(t){var o=t.geocode.center;e.form.latitude=o.lat,e.form.longitude=o.lng,e.updateMap(o.lat,o.lng)})).addTo(this.map)},updateMap:function(e,t){this.map.setView([e,t],15),this.marker.setLatLng([e,t])}}};var $=o(9184),O={insert:"head",singleton:!1};U()($.Z,O);$.Z.locals;const R=(0,F.Z)(P,[["render",function(e,t,o,k,N,w){var M=(0,n.resolveComponent)("Link");return(0,n.openBlock)(),(0,n.createElementBlock)("div",a,[(0,n.createElementVNode)("div",l,[(0,n.createElementVNode)("h3",null,(0,n.toDisplayString)(e.pageTitle)+" Issue",1),(0,n.createVNode)(M,{href:"/reports"},{default:(0,n.withCtx)((function(){return[r]})),_:1})]),(0,n.createElementVNode)("div",i,[(0,n.createElementVNode)("div",s,[(0,n.createElementVNode)("form",{onSubmit:t[8]||(t[8]=(0,n.withModifiers)((function(e){return w.submit()}),["prevent"]))},[c,(0,n.withDirectives)((0,n.createElementVNode)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return N.form.issue=e}),class:"form-control",required:""},null,512),[[n.vModelText,N.form.issue]]),N.form.errors.issue?((0,n.openBlock)(),(0,n.createElementBlock)("div",d,(0,n.toDisplayString)(N.form.errors.issue),1)):(0,n.createCommentVNode)("",!0),u,(0,n.withDirectives)((0,n.createElementVNode)("select",{class:"form-control",onChange:t[1]||(t[1]=function(e){return w.filterBarangay()}),"onUpdate:modelValue":t[2]||(t[2]=function(e){return N.form.municipality=e}),required:""},[m,((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.municipalities_global,(function(e){return(0,n.openBlock)(),(0,n.createElementBlock)("option",{key:e},(0,n.toDisplayString)(e),1)})),128))],544),[[n.vModelSelect,N.form.municipality]]),p,(0,n.withDirectives)((0,n.createElementVNode)("select",{class:"form-control","onUpdate:modelValue":t[3]||(t[3]=function(e){return N.form.barangay=e}),required:""},[f,((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(N.my_barangays,(function(e){return(0,n.openBlock)(),(0,n.createElementBlock)("option",{key:e},(0,n.toDisplayString)(e),1)})),128))],512),[[n.vModelSelect,N.form.barangay]]),g,(0,n.createElementVNode)("div",h,[(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=function(e){return N.form.latitude=e}),class:"form-control",placeholder:"Latitude",readonly:""},null,512),[[n.vModelText,N.form.latitude]]),(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=function(e){return N.form.longitude=e}),class:"form-control",placeholder:"Longitude",readonly:""},null,512),[[n.vModelText,N.form.longitude]])]),(0,n.createElementVNode)("button",{type:"button",class:"btn btn-secondary mt-2",onClick:t[6]||(t[6]=function(){return w.getMyLocation&&w.getMyLocation.apply(w,arguments)})},"Use My Location"),(0,n.createElementVNode)("button",{type:"button",class:"btn btn-secondary mt-2",onClick:t[7]||(t[7]=function(){return e.openMap&&e.openMap.apply(e,arguments)})},"Select on Map"),(0,n.createElementVNode)("button",{type:"submit",class:"btn btn-primary mt-3",disabled:N.form.processing},"Submit Report",8,y)],32)]),(0,n.createElementVNode)("div",b,[N.suggestions.length?((0,n.openBlock)(),(0,n.createElementBlock)("ul",v,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(N.suggestions,(function(t,o){return(0,n.openBlock)(),(0,n.createElementBlock)("li",{key:o,onClick:function(o){return e.selectLocation(t)},class:"list-group-item list-group-item-action"},(0,n.toDisplayString)(t.display_name),9,E)})),128))])):(0,n.createCommentVNode)("",!0),V])])])}]])}}]);