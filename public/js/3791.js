"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3791],{3791:(e,t,o)=>{o.r(t),o.d(t,{default:()=>_});var n=o(821),i={class:"relative row gap-20 masonry pos-r"},a={class:"peers fxw-nw jc-sb ai-c"},r=(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-x-lg",viewBox:"0 0 16 16"},[(0,n.createElementVNode)("path",{"fill-rule":"evenodd",d:"M13.854 2.146a.5.5 0 0 1 0 .708l-11 11a.5.5 0 0 1-.708-.708l11-11a.5.5 0 0 1 .708 0Z"}),(0,n.createElementVNode)("path",{"fill-rule":"evenodd",d:"M2.146 2.146a.5.5 0 0 0 0 .708l11 11a.5.5 0 0 0 .708-.708l-11-11a.5.5 0 0 0-.708 0Z"})],-1),l={class:"row"},s={class:"col-md-4"},c=(0,n.createElementVNode)("label",{for:"issue"},"Issue Description",-1),d={key:0,class:"fs-6 c-red-500"},u=(0,n.createElementVNode)("label",{for:"municipality"},"Municipality",-1),m=(0,n.createElementVNode)("option",null,null,-1),p={key:1,class:"fs-6 c-red-500"},f=(0,n.createElementVNode)("label",{for:"barangay"},"Barangay",-1),h=(0,n.createElementVNode)("option",null,null,-1),g={key:2,class:"fs-6 c-red-500"},y=(0,n.createElementVNode)("label",{for:"barangay"},"Type",-1),v=[(0,n.createElementVNode)("option",null,null,-1),(0,n.createElementVNode)("option",null,"Emergency and Disaster-Related Sanitation Issue",-1),(0,n.createElementVNode)("option",null,"Hygiene and Personal Sanitation Issue",-1),(0,n.createElementVNode)("option",null,"Industrial and Environmental Sanitation Issue",-1),(0,n.createElementVNode)("option",null,"Solid Waste Management Issue",-1),(0,n.createElementVNode)("option",null,"Toilet and Human Waste Management Issue",-1),(0,n.createElementVNode)("option",null,"Vector-Borne Sanitation Issue",-1),(0,n.createElementVNode)("option",null,"Water Sanitation Issue",-1)],k={key:3,class:"fs-6 c-red-500"},V={class:"location-inputs"},E=(0,n.createElementVNode)("label",null,"Latitude",-1),b={key:0,class:"fs-6 c-red-500"},N=(0,n.createElementVNode)("label",null,"Longitude",-1),L={key:1,class:"fs-6 c-red-500"},B=["disabled"],w={class:"col-md-7 position-relative"},D={class:"position-relative"},S={key:0,class:"list-group position-absolute bg-white w-100 shadow p-2",style:{"max-height":"200px","overflow-y":"auto","z-index":"1050"}},x=["onClick"],M=(0,n.createElementVNode)("div",{id:"map",style:{height:"400px",position:"relative","z-index":"1"}},null,-1);var C=o(9038),I=o(5243),T=o.n(I);o(5817);const q={props:{editData:Object,barangays:Object},data:function(){return{form:(0,C.cI)({id:"",issue:"",municipality:"",type:"",barangay:"",Latitude:"",Longitude:""}),displayed_coordinates:"",title:"",my_barangays:[],searchQuery:"",suggestions:[]}},mounted:function(){void 0!==this.editData?(this.title="Edit Reported",this.form.id=this.editData.id,this.form.issue=this.editData.issue,this.form.municipality=this.editData.municipality,this.form.barangay=this.editData.barangay,this.filterBarangay(),this.form.type=this.editData.type,this.form.Latitude=this.editData.Latitude,this.form.Longitude=this.editData.Longitude,this.initMap(this.form.Latitude,this.form.Longitude)):(this.title="Report",this.initMap(7.575589251826168,125.99270958172241))},methods:{submit:function(){void 0!==this.editData?this.form.patch("/issue/update"):this.form.post("store")},filterBarangay:function(){var e=this;this.my_barangays=this.barangays.filter((function(t){return t.municipality===e.form.municipality})).map((function(e){return e.barangay}))},getMyLocation:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e.form.Latitude=t.coords.latitude,e.form.Longitude=t.coords.longitude,e.updateMap(t.coords.latitude,t.coords.longitude)}),(function(e){alert("Geolocation failed: "+e.message)})):alert("Geolocation is not supported by this browser.")},searchLocation:function(){var e=this;if(this.searchQuery){var t="https://api.locationiq.com/v1/autocomplete.php?key=pk.2070cb3dbf9066600306adad278707a2&q=".concat(this.searchQuery,"&format=json");fetch(t).then((function(e){return e.json()})).then((function(t){e.suggestions=t}))}else this.suggestions=[]},selectLocation:function(e){this.form.Latitude=e.lat,this.form.Longitude=e.lon,this.updateMap(e.lat,e.lon),this.suggestions=[],this.searchQuery=e.display_name},initMap:function(e,t){var o=this;this.map=T().map("map").setView([e,t],15),T().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(this.map),this.marker=T().marker([e,t]).addTo(this.map),this.map.on("click",(function(e){var t=e.latlng,n=t.lat,i=t.lng;o.form.Latitude=n,o.form.Longitude=i,o.updateMap(n,i)}))},updateMap:function(e,t){this.map.setView([e,t],15),this.marker?this.marker.setLatLng([e,t]):this.marker=T().marker([e,t]).addTo(this.map)}}};const _=(0,o(3744).Z)(q,[["render",function(e,t,o,C,I,T){var q=(0,n.resolveComponent)("Link");return(0,n.openBlock)(),(0,n.createElementBlock)("div",i,[(0,n.createElementVNode)("div",a,[(0,n.createElementVNode)("h3",null,(0,n.toDisplayString)(I.title)+" Sanitation Issue",1),(0,n.createVNode)(q,{href:"/issue"},{default:(0,n.withCtx)((function(){return[r]})),_:1})]),(0,n.createElementVNode)("div",l,[(0,n.createElementVNode)("div",s,[(0,n.createElementVNode)("form",{onSubmit:t[7]||(t[7]=(0,n.withModifiers)((function(e){return T.submit()}),["prevent"]))},[c,(0,n.withDirectives)((0,n.createElementVNode)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return I.form.issue=e}),class:"form-control",required:""},null,512),[[n.vModelText,I.form.issue]]),I.form.errors.issue?((0,n.openBlock)(),(0,n.createElementBlock)("div",d,(0,n.toDisplayString)(I.form.errors.issue),1)):(0,n.createCommentVNode)("",!0),u,(0,n.withDirectives)((0,n.createElementVNode)("select",{class:"form-control",onChange:t[1]||(t[1]=function(e){return T.filterBarangay()}),"onUpdate:modelValue":t[2]||(t[2]=function(e){return I.form.municipality=e}),required:""},[m,((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.municipalities_global,(function(e){return(0,n.openBlock)(),(0,n.createElementBlock)("option",{key:e},(0,n.toDisplayString)(e),1)})),128))],544),[[n.vModelSelect,I.form.municipality]]),I.form.errors.municipality?((0,n.openBlock)(),(0,n.createElementBlock)("div",p,(0,n.toDisplayString)(I.form.errors.municipality),1)):(0,n.createCommentVNode)("",!0),f,(0,n.withDirectives)((0,n.createElementVNode)("select",{class:"form-control","onUpdate:modelValue":t[3]||(t[3]=function(e){return I.form.barangay=e}),required:""},[h,((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(I.my_barangays,(function(e){return(0,n.openBlock)(),(0,n.createElementBlock)("option",{key:e},(0,n.toDisplayString)(e),1)})),128))],512),[[n.vModelSelect,I.form.barangay]]),I.form.errors.barangay?((0,n.openBlock)(),(0,n.createElementBlock)("div",g,(0,n.toDisplayString)(I.form.errors.barangay),1)):(0,n.createCommentVNode)("",!0),y,(0,n.withDirectives)((0,n.createElementVNode)("select",{class:"form-control","onUpdate:modelValue":t[4]||(t[4]=function(e){return I.form.type=e}),required:""},v,512),[[n.vModelSelect,I.form.type]]),I.form.errors.type?((0,n.openBlock)(),(0,n.createElementBlock)("div",k,(0,n.toDisplayString)(I.form.errors.type),1)):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("div",V,[E,(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text","onUpdate:modelValue":t[5]||(t[5]=function(e){return I.form.Latitude=e}),class:"form-control",placeholder:"Latitude",required:"",readonly:""},null,512),[[n.vModelText,I.form.Latitude]]),I.form.errors.Latitude?((0,n.openBlock)(),(0,n.createElementBlock)("div",b,(0,n.toDisplayString)(I.form.errors.Latitude),1)):(0,n.createCommentVNode)("",!0),N,(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=function(e){return I.form.Longitude=e}),class:"form-control",placeholder:"Longitude",required:"",readonly:""},null,512),[[n.vModelText,I.form.Longitude]]),I.form.errors.Longitude?((0,n.openBlock)(),(0,n.createElementBlock)("div",L,(0,n.toDisplayString)(I.form.errors.Longitude),1)):(0,n.createCommentVNode)("",!0)]),(0,n.createElementVNode)("button",{type:"submit",class:"btn btn-primary mt-3 text-white",disabled:I.form.processing},"Submit Report",8,B)],32)]),(0,n.createElementVNode)("div",w,[(0,n.createElementVNode)("div",D,[(0,n.withDirectives)((0,n.createElementVNode)("input",{type:"text","onUpdate:modelValue":t[8]||(t[8]=function(e){return I.searchQuery=e}),onInput:t[9]||(t[9]=function(){return T.searchLocation&&T.searchLocation.apply(T,arguments)}),placeholder:"Search location...",class:"form-control mb-2 position-relative",style:{"z-index":"1050"}},null,544),[[n.vModelText,I.searchQuery]]),I.suggestions.length?((0,n.openBlock)(),(0,n.createElementBlock)("ul",S,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(I.suggestions,(function(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("li",{key:t,onClick:function(t){return T.selectLocation(e)},class:"list-group-item list-group-item-action"},(0,n.toDisplayString)(e.display_name),9,x)})),128))])):(0,n.createCommentVNode)("",!0)]),M])])])}]])}}]);