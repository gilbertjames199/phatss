"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3535],{3535:(e,t,i)=>{i.r(t),i.d(t,{default:()=>B});var n=i(821),o={class:"relative row gap-20 masonry pos-r"},a={class:"peers fxw-nw jc-sb ai-c"},s=(0,n.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-x-lg",viewBox:"0 0 16 16"},[(0,n.createElementVNode)("path",{"fill-rule":"evenodd",d:"M13.854 2.146a.5.5 0 0 1 0 .708l-11 11a.5.5 0 0 1-.708-.708l11-11a.5.5 0 0 1 .708 0Z"}),(0,n.createElementVNode)("path",{"fill-rule":"evenodd",d:"M2.146 2.146a.5.5 0 0 0 0 .708l11 11a.5.5 0 0 0 .708-.708l-11-11a.5.5.5 0 0 0-.708 0Z"})],-1),r={class:"row"},l={class:"col-md-4"},c=(0,n.createElementVNode)("label",{for:"barangay"},"Issue",-1),d=["value"],u=(0,n.createElementVNode)("label",{for:"barangay"},"Location",-1),m=["value"],p=(0,n.createElementVNode)("label",{for:"barangay"},"Intervention",-1),h=(0,n.createElementVNode)("option",null,null,-1),f=["value"],g={key:0,class:"fs-6 c-red-500"},v=["disabled"],y={class:"col-md-7 position-relative"},b={class:"position-relative"},k={key:0,class:"list-group position-absolute bg-white w-100 shadow p-2",style:{"max-height":"200px","overflow-y":"auto","z-index":"1050"}},E=["onClick"],V=(0,n.createElementVNode)("div",{id:"map",style:{height:"400px",position:"relative","z-index":"1"}},null,-1);var w=i(9038),N=i(5243),L=i.n(N);i(5817);const _={props:{editData:Object,barangays:Object,issue:Object,interventions:Object},data:function(){return{form:(0,w.cI)({id:"",issue_id:"",intervention_id:""}),displayed_coordinates:"",title:"",my_barangays:[],searchQuery:"",suggestions:[]}},mounted:function(){void 0!==this.editData?(this.title="Edit",this.form.intervention_id=this.editData.intervention_id,this.form.issue_id=this.editData.issue_id,this.form.id=this.editData.id,this.initMap(this.issue.Latitude,this.issue.Longitude)):(this.title="Add",this.form.issue_id=this.issue.id,this.initMap(this.issue.Latitude,this.issue.Longitude))},methods:{submit:function(){void 0!==this.editData?this.form.patch("/issue-intervention/update"):this.form.post("/issue-intervention/store")},filterBarangay:function(){var e=this;this.my_barangays=this.barangays.filter((function(t){return t.municipality===e.form.municipality})).map((function(e){return e.barangay}))},getMyLocation:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e.form.Latitude=t.coords.latitude,e.form.Longitude=t.coords.longitude,e.updateMap(t.coords.latitude,t.coords.longitude)}),(function(e){alert("Geolocation failed: "+e.message)})):alert("Geolocation is not supported by this browser.")},searchLocation:function(){var e=this;if(this.searchQuery){var t="https://api.locationiq.com/v1/autocomplete.php?key=pk.2070cb3dbf9066600306adad278707a2&q=".concat(this.searchQuery,"&format=json");fetch(t).then((function(e){return e.json()})).then((function(t){e.suggestions=t}))}else this.suggestions=[]},selectLocation:function(e){this.form.Latitude=e.lat,this.form.Longitude=e.lon,this.updateMap(e.lat,e.lon),this.suggestions=[],this.searchQuery=e.display_name},initMap:function(e,t){this.map=L().map("map").setView([e,t],15),L().tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png").addTo(this.map),this.marker=L().marker([e,t]).addTo(this.map)}}};const B=(0,i(3744).Z)(_,[["render",function(e,t,i,w,N,L){var _=(0,n.resolveComponent)("Link");return(0,n.openBlock)(),(0,n.createElementBlock)("div",o,[(0,n.createElementVNode)("div",a,[(0,n.createElementVNode)("h3",null,(0,n.toDisplayString)(N.title)+" Intervention",1),(0,n.createVNode)(_,{href:"/issue"},{default:(0,n.withCtx)((function(){return[s]})),_:1})]),(0,n.createElementVNode)("div",r,[(0,n.createElementVNode)("div",l,[(0,n.createElementVNode)("form",{onSubmit:t[1]||(t[1]=(0,n.withModifiers)((function(e){return L.submit()}),["prevent"]))},[c,(0,n.createElementVNode)("input",{type:"text",value:i.issue.issue,class:"form-control",readonly:""},null,8,d),u,(0,n.createElementVNode)("input",{type:"text",value:i.issue.barangay,class:"form-control",readonly:""},null,8,m),p,(0,n.withDirectives)((0,n.createElementVNode)("select",{class:"form-control","onUpdate:modelValue":t[0]||(t[0]=function(e){return N.form.intervention_id=e}),required:""},[h,((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(i.interventions,(function(e){return(0,n.openBlock)(),(0,n.createElementBlock)("option",{value:e.id},(0,n.toDisplayString)(e.description),9,f)})),256))],512),[[n.vModelSelect,N.form.intervention_id]]),N.form.errors.intervention_id?((0,n.openBlock)(),(0,n.createElementBlock)("div",g,(0,n.toDisplayString)(N.form.errors.intervention_id),1)):(0,n.createCommentVNode)("",!0),(0,n.createElementVNode)("button",{type:"submit",class:"btn btn-primary mt-3 text-white",disabled:N.form.processing}," Save ",8,v)],32)]),(0,n.createElementVNode)("div",y,[(0,n.createElementVNode)("div",b,[N.suggestions.length?((0,n.openBlock)(),(0,n.createElementBlock)("ul",k,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(N.suggestions,(function(e,t){return(0,n.openBlock)(),(0,n.createElementBlock)("li",{key:t,onClick:function(t){return L.selectLocation(e)},class:"list-group-item list-group-item-action"},(0,n.toDisplayString)(e.display_name),9,E)})),128))])):(0,n.createCommentVNode)("",!0)]),V])])])}]])}}]);