"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2106],{3716:(t,e,o)=>{o.d(e,{Z:()=>r});var a=o(3645),n=o.n(a)()((function(t){return t[1]}));n.push([t.id,"#app,body,html{box-sizing:border-box;height:100%;margin:0;padding:0;width:100%}.map{height:100vh;position:relative;width:100%}@media (max-width:768px){.map{height:80vh;height:70vh;width:100%}}.suggestions{background-color:#fff;border:1px solid #ccc;list-style:none;margin:0;max-height:150px;overflow-y:auto;padding:0}.suggestions li{cursor:pointer;padding:8px}.suggestions li:hover{background-color:#f0f0f0}",""]);const r=n},2106:(t,e,o)=>{o.r(e),o.d(e,{default:()=>I});var a=o(821),n=(0,a.createElementVNode)("h1",null,"Nearest Response Center",-1),r=(0,a.createElementVNode)("div",null," This form shows the way points from the location of the issue reported to the nearest response center recorded in our database. ",-1),l={id:"app"},i={class:"row"},s={class:"col-md-3 position-relative"},c=(0,a.createElementVNode)("tr",{style:{"background-color":"dimgray",color:"white"}},[(0,a.createElementVNode)("th",{colspan:"2"},"ISSUE DETAILS")],-1),h=(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("b",null,"Description: ")],-1),m=(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("b",null,"Location: ")],-1),d=(0,a.createElementVNode)("tr",{style:{"background-color":"dimgray",color:"white"}},[(0,a.createElementVNode)("th",{colspan:"2"},"NEAREST HEALTH/RESPONSE CENTER")],-1),u=(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("b",null,"Center name: ")],-1),p={key:0},g={key:1},f=(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("b",null,"Distance:  ")],-1),y={class:"col-md-9 position-relative"},b=(0,a.createElementVNode)("div",null,null,-1),E=["id"];var N=o(491),v=(o(5215),o(5243)),S=o.n(v),w=o(7676),V=o(4373),O=o(4083);S().Icon.Default.mergeOptions({iconRetinaUrl:V.Z,iconUrl:w.Z,shadowUrl:O.Z});const k={props:{long_from:Number,lat_from:Number,long_to:Number,lat_to:Number,nhc:Object,issue:Object},components:{LRoutingMachine:N.Z},data:function(){return{mapId:"map",mapObject:null,zoom:6,center:{lat:this.$props.lat_from,lng:this.$props.long_from},osmUrl:"http://{s}.tile.osm.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',from:{lat:this.$props.lat_from,lng:this.$props.long_from},to:{lat:this.$props.lat_to,lng:this.$props.long_to},searchFrom:"",searchTo:"",showSuggestions:null,suggestions:[],waypoints:[]}},watch:{from:function(t){this.updateWaypoints()},to:function(t){this.updateWaypoints()}},mounted:function(){this.mapObject=S().map(this.mapId,{zoom:this.zoom,center:this.center}),S().tileLayer(this.osmUrl,{attribution:this.attribution}).addTo(this.mapObject),this.mapObject.on("click",this.handleMapClick);var t=localStorage.getItem("searchFrom"),e=localStorage.getItem("searchTo");t&&(this.searchFrom=t,this.from=JSON.parse(localStorage.getItem("fromCoord"))),e&&(this.searchTo=e,this.to=JSON.parse(localStorage.getItem("toCoord"))),this.from.lat&&this.from.lng&&this.addMarker(this.from,"From Location"),this.to.lat&&this.to.lng&&this.addMarker(this.to,"To Location"),this.from.lat&&this.to.lat&&(this.center={lat:(this.from.lat+this.to.lat)/2,lng:(this.from.lng+this.to.lng)/2})},methods:{searchLocation:function(t){var e=this,o="from"===t?this.searchFrom:this.searchTo;if(o){var a="https://nominatim.openstreetmap.org/search?format=json&q=".concat(o);fetch(a).then((function(t){return t.json()})).then((function(t){e.suggestions=t}))}else this.suggestions=[]},selectLocation:function(t,e){this.showSuggestions=null,"from"===e?(this.from={lat:parseFloat(t.lat),lng:parseFloat(t.lon)},this.searchFrom=t.display_name):(this.to={lat:parseFloat(t.lat),lng:parseFloat(t.lon)},this.searchTo=t.display_name)},handleMapClick:function(t){var e=t.latlng,o=e.lat,a=e.lng;"from"===this.showSuggestions?(this.from={lat:o,lng:a},this.searchFrom="lat: ".concat(o,", lng: ").concat(a),this.showSuggestions=null):"to"===this.showSuggestions&&(this.to={lat:o,lng:a},this.searchTo="lat: ".concat(o,", lng: ").concat(a),this.showSuggestions=null)},updateWaypoints:function(){var t=this;this.waypoints=[{lat:this.lat_from,lng:this.long_from},{lat:this.lat_to,lng:this.long_to}],this.mapObject.eachLayer((function(e){e instanceof S().Marker&&t.mapObject.removeLayer(e)})),this.addMarker(this.from,"From Location"),this.addMarker(this.to,"To Location")},reloadPage:function(){this.searchFrom&&this.searchTo?(localStorage.setItem("searchFrom",this.searchFrom),localStorage.setItem("searchTo",this.searchTo),localStorage.setItem("fromCoord",JSON.stringify(this.from)),localStorage.setItem("toCoord",JSON.stringify(this.to)),location.reload()):alert("Both 'From' and 'To' fields must be filled to reload the page.")},addMarker:function(t,e){S().marker([t.lat,t.lng]).addTo(this.mapObject).bindPopup("<b>".concat(e,"</b><br>Lat: ").concat(t.lat,", Lng: ").concat(t.lng)).openPopup()}}};var L=o(3379),j=o.n(L),D=o(3716),T={insert:"head",singleton:!1};j()(D.Z,T);D.Z.locals;const I=(0,o(3744).Z)(k,[["render",function(t,e,o,N,v,S){var w=(0,a.resolveComponent)("LRoutingMachine");return(0,a.openBlock)(),(0,a.createElementBlock)(a.Fragment,null,[n,r,(0,a.createElementVNode)("div",l,[(0,a.createElementVNode)("div",i,[(0,a.createElementVNode)("div",s,[(0,a.createElementVNode)("table",null,[c,(0,a.createElementVNode)("tr",null,[h,(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("u",null,(0,a.toDisplayString)(o.issue.issue),1)])]),(0,a.createElementVNode)("tr",null,[m,(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("u",null,(0,a.toDisplayString)(o.issue.barangay),1)])]),d,(0,a.createElementVNode)("tr",null,[u,(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("u",null,["Provincial Hospital"===o.nhc.DESC?((0,a.openBlock)(),(0,a.createElementBlock)("span",p,"Davao de Oro "+(0,a.toDisplayString)(o.nhc.DESC)+", "+(0,a.toDisplayString)(o.nhc.municipality),1)):((0,a.openBlock)(),(0,a.createElementBlock)("span",g,(0,a.toDisplayString)(o.nhc.type)+", "+(0,a.toDisplayString)(o.nhc.municipality),1))])])]),(0,a.createElementVNode)("tr",null,[f,(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("u",null,(0,a.toDisplayString)(t.format_number(o.nhc.distance,2,!0))+" KM",1)])])])]),(0,a.createElementVNode)("div",y,[b,(0,a.createElementVNode)("div",{id:v.mapId,class:"map"},null,8,E),(0,a.createVNode)(w,{mapObject:v.mapObject,waypoints:v.waypoints},null,8,["mapObject","waypoints"])])])])],64)}]])},491:(t,e,o)=>{o.d(e,{Z:()=>l});o(1455);var a=o(5243),n=o.n(a),r=o(7820);const l={props:{mapObject:{type:Object},visible:{type:Boolean,default:!0},waypoints:{type:Array,required:!0},router:{type:r.IRouter},plan:{type:n().Routing.Plan},geocoder:{type:r.IGeocoder},fitSelectedRoutes:{type:[String,Boolean],default:"smart"},lineOptions:{type:r.LineOptions},routeLine:{type:Function},autoRoute:{type:Boolean,default:!0},routeWhileDragging:{type:Boolean,default:!1},routeDragInterval:{type:Number,default:500},waypointMode:{type:String,default:"connect"},useZoomParameter:{type:Boolean,default:!1},showAlternatives:{type:Boolean,default:!0},altLineOptions:{type:r.LineOptions}},name:"LRoutingMachine",data:function(){return{ready:!1,map:null,layer:null}},watch:{mapObject:function(){null!=this.mapObject&&this.add()}},mounted:function(){this.add()},beforeUnmount:function(){return this.layer?this.layer.remove():null},methods:{add:function(){if(null!=this.mapObject){var t={waypoints:this.waypoints,fitSelectedRoutes:this.fitSelectedRoutes,autoRoute:this.autoRoute,routeWhileDragging:this.routeWhileDragging,routeDragInterval:this.routeDragInterval,waypointMode:this.waypointMode,useZoomParameter:this.useZoomParameter,showAlternatives:this.showAlternatives},e=n().Routing.control(t);e.addTo(this.mapObject),this.layer=e,this.ready=!0}}}}}}]);