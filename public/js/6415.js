"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6415],{866:(e,t,o)=>{o.d(t,{Z:()=>l});var a=o(3645),n=o.n(a)()((function(e){return e[1]}));n.push([e.id,"#app,body,html{box-sizing:border-box;height:100%;margin:0;padding:0;width:100%}.map{height:100vh;position:relative;width:100%}@media (max-width:768px){.map{height:80vh;height:70vh;width:100%}}.suggestions{background-color:#fff;border:1px solid #ccc;list-style:none;margin:0;max-height:150px;overflow-y:auto;padding:0}.suggestions li{cursor:pointer;padding:8px}.suggestions li:hover{background-color:#f0f0f0}.table-container{border:2px solid #000!important;padding:5px}",""]);const l=n},6415:(e,t,o)=>{o.r(t),o.d(t,{default:()=>M});var a=o(821),n={class:"relative row gap-20 masonry pos-r"},l={class:"peers fxw-nw jc-sb ai-c"},r=(0,a.createElementVNode)("h1",null,"Nearest Response Center",-1),i=(0,a.createElementVNode)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",fill:"currentColor",class:"bi bi-x-lg",viewBox:"0 0 16 16"},[(0,a.createElementVNode)("path",{"fill-rule":"evenodd",d:"M13.854 2.146a.5.5 0 0 1 0 .708l-11 11a.5.5 0 0 1-.708-.708l11-11a.5.5 0 0 1 .708 0Z"}),(0,a.createElementVNode)("path",{"fill-rule":"evenodd",d:"M2.146 2.146a.5.5 0 0 0 0 .708l11 11a.5.5 0 0 0 .708-.708l-11-11a.5.5.5 0 0 0-.708 0Z"})],-1),s={id:"app"},c={class:"row"},d={class:"col-md-3 position-relative"},h={class:"table-container"},m={class:"table-responsive"},p={class:"table table-bordered"},u=(0,a.createElementVNode)("tr",{style:{"background-color":"dimgray",color:"white"}},[(0,a.createElementVNode)("th",{colspan:"2"},"ISSUE DETAILS")],-1),g=(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("b",null,"Description:")],-1),f=(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("b",null,"Location:")],-1),y=(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("b",null,"Type: ")],-1),b=(0,a.createElementVNode)("tr",{style:{"background-color":"dimgray",color:"white"}},[(0,a.createElementVNode)("th",{colspan:"2"},"NEAREST HEALTH/RESPONSE CENTER")],-1),N=(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("b",null,"Center name:")],-1),E={key:0},v={key:1},w=(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("b",null,"Distance: ")],-1),V={class:"col-md-9 position-relative"},S=(0,a.createElementVNode)("div",null,null,-1),O=["id"];var k=o(491),D=(o(5215),o(5243)),j=o.n(D),L=o(7676),T=o(4373),I=o(4083);j().Icon.Default.mergeOptions({iconRetinaUrl:T.Z,iconUrl:L.Z,shadowUrl:I.Z});const _={props:{long_from:Number,lat_from:Number,long_to:Number,lat_to:Number,nhc:Object,issue:Object},components:{LRoutingMachine:k.Z},data:function(){return{mapId:"map",mapObject:null,zoom:6,center:{lat:this.$props.lat_from,lng:this.$props.long_from},osmUrl:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> &copy; <a href="https://carto.com/">CARTO</a>',from:{lat:this.$props.lat_from,lng:this.$props.long_from},to:{lat:this.$props.lat_to,lng:this.$props.long_to},searchFrom:"",searchTo:"",showSuggestions:null,suggestions:[],waypoints:[]}},watch:{from:function(e){this.updateWaypoints()},to:function(e){this.updateWaypoints()}},mounted:function(){this.mapObject=j().map(this.mapId,{zoom:this.zoom,center:this.center}),j().tileLayer(this.osmUrl,{attribution:this.attribution}).addTo(this.mapObject);var e=localStorage.getItem("searchFrom"),t=localStorage.getItem("searchTo");e&&(this.searchFrom=e,this.from=JSON.parse(localStorage.getItem("fromCoord"))),t&&(this.searchTo=t,this.to=JSON.parse(localStorage.getItem("toCoord"))),this.from.lat&&this.to.lat&&(this.center={lat:(this.from.lat+this.to.lat)/2,lng:(this.from.lng+this.to.lng)/2}),this.updateWaypoints()},methods:{searchLocation:function(e){var t=this,o="from"===e?this.searchFrom:this.searchTo;if(o){var a="https://nominatim.openstreetmap.org/search?format=json&q=".concat(o);fetch(a).then((function(e){return e.json()})).then((function(e){t.suggestions=e}))}else this.suggestions=[]},selectLocation:function(e,t){this.showSuggestions=null,"from"===t?(this.from={lat:parseFloat(e.lat),lng:parseFloat(e.lon)},this.searchFrom=e.display_name):(this.to={lat:parseFloat(e.lat),lng:parseFloat(e.lon)},this.searchTo=e.display_name)},handleMapClick:function(e){var t=e.latlng,o=t.lat,a=t.lng;"from"===this.showSuggestions?(this.from={lat:o,lng:a},this.searchFrom="lat: ".concat(o,", lng: ").concat(a),this.showSuggestions=null):"to"===this.showSuggestions&&(this.to={lat:o,lng:a},this.searchTo="lat: ".concat(o,", lng: ").concat(a),this.showSuggestions=null)},updateWaypoints:function(){var e=this;this.waypoints=[{lat:this.lat_from,lng:this.long_from},{lat:this.lat_to,lng:this.long_to}],this.mapObject.eachLayer((function(t){t instanceof j().Marker&&e.mapObject.removeLayer(t)})),this.addMarker(this.from,"From Location"),this.addMarker(this.to,"To Location")},reloadPage:function(){this.searchFrom&&this.searchTo?(localStorage.setItem("searchFrom",this.searchFrom),localStorage.setItem("searchTo",this.searchTo),localStorage.setItem("fromCoord",JSON.stringify(this.from)),localStorage.setItem("toCoord",JSON.stringify(this.to)),location.reload()):alert("Both 'From' and 'To' fields must be filled to reload the page.")},addMarker:function(e,t){j().marker([e.lat,e.lng]).addTo(this.mapObject).bindPopup("<b>".concat(t,"</b><br>Lat: ").concat(e.lat,", Lng: ").concat(e.lng)).openPopup()}}};var R=o(3379),C=o.n(R),x=o(866),F={insert:"head",singleton:!1};C()(x.Z,F);x.Z.locals;const M=(0,o(3744).Z)(_,[["render",function(e,t,o,k,D,j){var L=(0,a.resolveComponent)("Link"),T=(0,a.resolveComponent)("LRoutingMachine");return(0,a.openBlock)(),(0,a.createElementBlock)("div",n,[(0,a.createElementVNode)("div",l,[r,(0,a.createVNode)(L,{href:"/issue"},{default:(0,a.withCtx)((function(){return[i]})),_:1})]),(0,a.createElementVNode)("div",s,[(0,a.createElementVNode)("div",c,[(0,a.createElementVNode)("div",d,[(0,a.createElementVNode)("div",h,[(0,a.createElementVNode)("div",m,[(0,a.createElementVNode)("table",p,[u,(0,a.createElementVNode)("tr",null,[g,(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("u",null,(0,a.toDisplayString)(o.issue.issue),1)])]),(0,a.createElementVNode)("tr",null,[f,(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("u",null,(0,a.toDisplayString)(o.issue.barangay),1)])]),(0,a.createElementVNode)("tr",null,[y,(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("u",null,(0,a.toDisplayString)(o.issue.type),1)])]),b,(0,a.createElementVNode)("tr",null,[N,(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("u",null,["Provincial Hospital"===o.nhc.DESC?((0,a.openBlock)(),(0,a.createElementBlock)("span",E,"Davao de Oro "+(0,a.toDisplayString)(o.nhc.DESC)+", "+(0,a.toDisplayString)(o.nhc.municipality),1)):((0,a.openBlock)(),(0,a.createElementBlock)("span",v,(0,a.toDisplayString)(o.nhc.type)+", "+(0,a.toDisplayString)(o.nhc.municipality),1))])])]),(0,a.createElementVNode)("tr",null,[w,(0,a.createElementVNode)("td",null,[(0,a.createElementVNode)("u",null,(0,a.toDisplayString)(e.format_number(o.nhc.distance,2,!0))+"Â KM",1)])])])])])]),(0,a.createElementVNode)("div",V,[S,(0,a.createElementVNode)("div",{id:D.mapId,class:"map"},null,8,O),(0,a.createVNode)(T,{mapObject:D.mapObject,waypoints:D.waypoints},null,8,["mapObject","waypoints"])])])])])}]])},491:(e,t,o)=>{o.d(t,{Z:()=>r});o(1455);var a=o(5243),n=o.n(a),l=o(7820);const r={props:{mapObject:{type:Object},visible:{type:Boolean,default:!0},waypoints:{type:Array,required:!0},router:{type:l.IRouter},plan:{type:n().Routing.Plan},geocoder:{type:l.IGeocoder},fitSelectedRoutes:{type:[String,Boolean],default:"smart"},lineOptions:{type:l.LineOptions},routeLine:{type:Function},autoRoute:{type:Boolean,default:!0},routeWhileDragging:{type:Boolean,default:!1},routeDragInterval:{type:Number,default:500},waypointMode:{type:String,default:"connect"},useZoomParameter:{type:Boolean,default:!1},showAlternatives:{type:Boolean,default:!0},altLineOptions:{type:l.LineOptions}},name:"LRoutingMachine",data:function(){return{ready:!1,map:null,layer:null}},watch:{mapObject:function(){null!=this.mapObject&&this.add()}},mounted:function(){this.add()},beforeUnmount:function(){return this.layer?this.layer.remove():null},methods:{add:function(){if(null!=this.mapObject){var e={waypoints:this.waypoints,fitSelectedRoutes:this.fitSelectedRoutes,autoRoute:this.autoRoute,routeWhileDragging:this.routeWhileDragging,routeDragInterval:this.routeDragInterval,waypointMode:this.waypointMode,useZoomParameter:this.useZoomParameter,showAlternatives:this.showAlternatives},t=n().Routing.control(e);t.addTo(this.mapObject),this.layer=t,this.ready=!0}}}}}}]);