"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6717],{9347:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(3645),l=n.n(r)()((function(e){return e[1]}));l.push([e.id,".mapdiv[data-v-202e1c64]{height:500px;width:100%}",""]);const o=l},1563:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(3645),l=n.n(r)()((function(e){return e[1]}));l.push([e.id,"#sidebar-wrapper{height:100%;margin-right:-250px;margin-top:-9px;overflow-y:auto;position:fixed;right:250px;transition:all .5s ease;width:auto;z-index:1000}",""]);const o=l},6717:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Oe});var r=n(821),l=function(e){return(0,r.pushScopeId)("data-v-202e1c64"),e=e(),(0,r.popScopeId)(),e},o={class:"row gap-20 masonry pos-r"},a={class:"masonry-item w-100"},i={class:"row gap-20"},c={class:"peers fxw-nw jc-sb ai-c"},s=l((function(){return(0,r.createElementVNode)("h1",null,"Water Resources Level I",-1)})),u={class:"peers"},d={class:"peer"},m={class:"peers d-flex flex-wrap align-items-center justify-content-start"},p={class:"d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 bgc-blue-50 c-blue-500 me-2"},h={key:0,class:"d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 bgc-yellow-50 c-black-500 me-2"},f={key:1,class:"d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 bgc-red-50 c-red-500 me-2"},N={key:2,class:"d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 bgc-blue-50 c-blue-500 me-2"},b={key:3,class:"d-ib lh-0 va-m fw-600 bdrs-10em pX-15 pY-15 bgc-red-50 c-red-500"},E=l((function(){return(0,r.createElementVNode)("div",{class:"peers fxw-nw jc-sb ai-c"},[(0,r.createElementVNode)("h5")],-1)})),V={class:"col-12"},g={class:"tab"},y={key:0},v=l((function(){return(0,r.createElementVNode)("div",{class:"col-md-9"},[(0,r.createElementVNode)("div",{class:"layers bd bgc-white p-20"},[(0,r.createElementVNode)("div",{id:"leafletMapid",class:"mapdiv border border-dark"})])],-1)})),k={key:0,class:"col-md-3"},S={class:"layers bd bgc-white p-20"},w={class:"layer w-100 mB-10"},_={class:"d-flex justify-content-between align-items-center"},x=l((function(){return(0,r.createElementVNode)("h4",null,"Details",-1)})),B=[l((function(){return(0,r.createElementVNode)("b",null,"X",-1)}))],D=l((function(){return(0,r.createElementVNode)("hr",null,null,-1)})),C=l((function(){return(0,r.createElementVNode)("strong",null,"Name:",-1)})),F=(0,r.createTextVNode)(),A=l((function(){return(0,r.createElementVNode)("strong",null,"Address:",-1)})),L=(0,r.createTextVNode)(),T=l((function(){return(0,r.createElementVNode)("strong",null,"Precision:",-1)})),M=(0,r.createTextVNode)(),P=l((function(){return(0,r.createElementVNode)("strong",null,"Risk Level:",-1)})),j=(0,r.createTextVNode)(),O=l((function(){return(0,r.createElementVNode)("strong",null,"Coordinates:",-1)})),Z=(0,r.createTextVNode)(),$=l((function(){return(0,r.createElementVNode)("strong",null,"Cluster Size:",-1)})),z=(0,r.createTextVNode)(),I={class:"col-md-9"},R={class:"layers bd bgc-white p-20"},H={class:"layer w-100 mB-10"},X=l((function(){return(0,r.createElementVNode)("h4",null,"Table",-1)})),Y=l((function(){return(0,r.createElementVNode)("hr",null,null,-1)})),U={class:"table table-bordered table-striped"},G=l((function(){return(0,r.createElementVNode)("thead",null,[(0,r.createElementVNode)("tr",null,[(0,r.createElementVNode)("th",null,"Name"),(0,r.createElementVNode)("th",null,"Address"),(0,r.createElementVNode)("th",null,"Precision"),(0,r.createElementVNode)("th",null,"Risk Level"),(0,r.createElementVNode)("th",null,"Coordinates")])],-1)})),W={key:1},q={class:"col-md-9"},J={class:"layers bd bgc-white p-20"},K={class:"layer w-100 mB-10"},Q=l((function(){return(0,r.createElementVNode)("h4",null,"Table",-1)})),ee=l((function(){return(0,r.createElementVNode)("hr",null,null,-1)})),te={class:"table table-bordered table-striped"},ne=l((function(){return(0,r.createElementVNode)("thead",null,[(0,r.createElementVNode)("tr",null,[(0,r.createElementVNode)("th",null,"Name"),(0,r.createElementVNode)("th",null,"Address"),(0,r.createElementVNode)("th",null,"Precision"),(0,r.createElementVNode)("th",null,"Risk Level"),(0,r.createElementVNode)("th",null,"Coordinates")])],-1)})),re=l((function(){return(0,r.createElementVNode)("h4",null,[(0,r.createTextVNode)("FILTERS"),(0,r.createElementVNode)("br")],-1)})),le=l((function(){return(0,r.createElementVNode)("hr",null,null,-1)})),oe={key:0},ae=l((function(){return(0,r.createElementVNode)("b",null,"Municipality:",-1)})),ie=(0,r.createTextVNode)("   "),ce=l((function(){return(0,r.createElementVNode)("option",null,null,-1)})),se=(0,r.createTextVNode)("   "),ue=l((function(){return(0,r.createElementVNode)("b",null,"Barangays: ",-1)})),de=l((function(){return(0,r.createElementVNode)("option",null,null,-1)})),me=(0,r.createTextVNode)("   "),pe=l((function(){return(0,r.createElementVNode)("b",null,"Puroks: ",-1)})),he=l((function(){return(0,r.createElementVNode)("option",null,null,-1)})),fe=(0,r.createTextVNode)("   "),Ne=l((function(){return(0,r.createElementVNode)("b",null,"Type: ",-1)})),be=[l((function(){return(0,r.createElementVNode)("option",null,null,-1)})),l((function(){return(0,r.createElementVNode)("option",null,"Low",-1)})),l((function(){return(0,r.createElementVNode)("option",null,"Moderate",-1)})),l((function(){return(0,r.createElementVNode)("option",null,"High",-1)})),l((function(){return(0,r.createElementVNode)("option",null,"Very High",-1)}))],Ee=l((function(){return(0,r.createElementVNode)("br",null,null,-1)})),Ve=l((function(){return(0,r.createElementVNode)("hr",null,null,-1)})),ge=l((function(){return(0,r.createElementVNode)("h4",null,"Additional Details",-1)})),ye=l((function(){return(0,r.createElementVNode)("b",null,"Count: ",-1)})),ve=(0,r.createTextVNode)(),ke=l((function(){return(0,r.createElementVNode)("div",{class:"col-md-3"},null,-1)}));var Se,we=n(8687),_e=n(974),xe=n.n(_e),Be=n(5243),De=n.n(Be);function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,l,o=[],a=!0,i=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){i=!0,l=e}finally{try{a||null==n.return||n.return()}finally{if(i)throw l}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Le=(Ce(Se={components:{},props:{auth:Object,count:Number,p_mun:String,p_bar:String,p_pur:String,p_relrisk:String,p_my_filter:String,p_data:Object,barangays:Object,municipalities:Object,puroks:Object,g0:Object,g1:Object,g2:Object,g3:Object},data:function(){return{myData:{max:5,data:this.$props.p_data,lat_val:0,lng_val:0},selectedMarker:null,baseLayer:null,heatmapLayer:null,map:null,mun:this.$props.p_mun,bar:this.$props.p_bar,relrisk:this.$props.p_relrisk,pur:this.$props.p_pur,my_filter:this.$props.p_my_filter,home_lang:null,home_lat:null,selectedPoint:null,filter:!1,tab_selected:"map"}}},"components",{Filtering:we.Z}),Ce(Se,"watch",{}),Ce(Se,"computed",{}),Ce(Se,"mounted",(function(){this.initMap()})),Ce(Se,"methods",{getLocation:function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition((function(t){e.lat_val=t.coords.latitude,e.lng_val=t.coords.longitude,e.initMap()})):alert("Geolocation is not supported by this browser.")},initMap:function(){if(0!=this.lat_val&&0!=this.lng_val){this.baseLayer=De().tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://cloudmade.com">CloudMade</a>',maxZoom:18,minZoom:0});this.heatmapLayer=new(xe())({radius:10,blur:1,maxOpacity:8,minOpacity:.2,scaleRadius:!1,useLocalExtrema:!0,latField:"x",lngField:"y",valueField:"cluster_size",gradient:{.2:"#0000FF",.4:"#00FF00",.6:"#FFFF00",.8:"#FFA500",1:"#FF0000"}}),this.home_lat=7.6165921,this.home_lang=126.0364403;var e=9;this.mun&&(this.setCoords(),e=11),this.map=new(De().map)("leafletMapid",{center:new(De().LatLng)(this.home_lat,this.home_lang),zoom:e}),this.heatmapLayer.setData(this.myData),this.baseLayer.addTo(this.map),this.heatmapLayer.addTo(this.map),this.addHoverTooltips(),this.addMarkers()}},filter_me:function(e){"mun"===e&&(this.bar="",this.pur=""),"bar"===e&&(this.pur=""),this.$inertia.get("/water/resources/level-1",{mun:this.mun,bar:this.bar,pur:this.pur,relrisk:this.relrisk,my_filter:this.my_filter},{preserveScroll:!0,preserveState:!0,replace:!0,onSuccess:function(){window.location.reload()}})},clearFilter:function(){this.mun="",this.bar="",this.pur="",this.relrisk="",this.my_filter="",this.filter_me("")},addHoverTooltips:function(){var e=this;this.myData.data.forEach((function(t){var n=De().circleMarker([t.x,t.y],{radius:5,color:"transparent",fillOpacity:0}),r="\n                <div style=\"text-align: left; font-size: 14px; line-height: 1.5;\">\n                    <span style='text-align: center'><h4>Household Details</h4></span><hr>\n                    <strong>Name:</strong> <u>".concat(t.name||"N/A","</u><br>\n                    <strong>Address:</strong> <u>").concat(t.address||"N/A","</u><br>\n                    <strong>Precision:</strong> <u>").concat(t.precision||"N/A","</u><br>\n                    <strong>Risk Level:</strong> <u>").concat(t.risk_level||"N/A","</u><br>\n                    <strong>Coordinates:</strong> <u>(").concat(t.x.toFixed(6),", ").concat(t.y.toFixed(6),")</u><br>\n                    <stong>CLuster Size: <u>").concat(t.cluster_size,"</u></stong>\n                </div>\n            ");n.bindTooltip(r,{permanent:!1,direction:"top"}),n.addTo(e.map)}))},addMarkers:function(){var e=this;this.myData.data.forEach((function(t){De().circle([t.x,t.y],{radius:5,color:"transparent",fillOpacity:0}).addTo(e.map).on("click",(function(){e.selectedMarker&&e.map.removeLayer(e.selectedMarker),e.selectedMarker=De().marker([t.x,t.y]).addTo(e.map),e.selectedPoint=t}))}))},setCoords:function(){var e=this.mun_coordinates;if(this.mun&&e[this.mun]){var t=Fe(e[this.mun],2);this.home_lat=t[0],this.home_lang=t[1]}},clearSelection:function(){this.selectedMarker&&(this.map.removeLayer(this.selectedMarker),this.selectedMarker=null),this.selectedPoint=null},showFilter:function(){this.filter=!this.filter},openTab:function(e){var t=this;this.tab_selected=e,"map"===e&&this.map&&this.$nextTick((function(){t.initMap()}))}}),Se);var Te=n(3379),Me=n.n(Te),Pe=n(9347),je={insert:"head",singleton:!1};Me()(Pe.Z,je);Pe.Z.locals;const Oe=(0,n(3744).Z)(Le,[["render",function(e,t,n,l,Se,we){var _e=(0,r.resolveComponent)("filtering");return(0,r.openBlock)(),(0,r.createElementBlock)("div",o,[(0,r.createElementVNode)("div",a,[(0,r.createElementVNode)("div",i,[(0,r.createElementVNode)("div",c,[s,(0,r.createElementVNode)("div",u,[(0,r.createElementVNode)("div",d,[(0,r.createElementVNode)("button",{class:"btn btn-primary btn-sm mL-2 text-white",onClick:t[0]||(t[0]=function(e){return we.showFilter()})},"Filter")])])]),(0,r.createElementVNode)("div",m,[(0,r.createElementVNode)("span",p,(0,r.toDisplayString)(e.format_number(n.count,0,!0))+" results found ",1),Se.mun?((0,r.openBlock)(),(0,r.createElementBlock)("span",h,(0,r.toDisplayString)(Se.mun),1)):(0,r.createCommentVNode)("",!0),Se.bar?((0,r.openBlock)(),(0,r.createElementBlock)("span",f,(0,r.toDisplayString)(Se.bar),1)):(0,r.createCommentVNode)("",!0),Se.pur?((0,r.openBlock)(),(0,r.createElementBlock)("span",N,(0,r.toDisplayString)(Se.pur),1)):(0,r.createCommentVNode)("",!0),Se.relrisk?((0,r.openBlock)(),(0,r.createElementBlock)("span",b,(0,r.toDisplayString)(Se.relrisk),1)):(0,r.createCommentVNode)("",!0)]),E,(0,r.createElementVNode)("div",V,[(0,r.createElementVNode)("div",g,[(0,r.createElementVNode)("button",{class:(0,r.normalizeClass)(["tablinks font-weight-bold",{active:"map"===Se.tab_selected}]),onClick:t[1]||(t[1]=function(e){return we.openTab("map")})},"Map",2)]),"map"===Se.tab_selected?((0,r.openBlock)(),(0,r.createElementBlock)("div",y,[v,Se.selectedPoint?((0,r.openBlock)(),(0,r.createElementBlock)("div",k,[(0,r.createElementVNode)("div",S,[(0,r.createElementVNode)("div",w,[(0,r.createElementVNode)("div",_,[x,Se.selectedPoint?((0,r.openBlock)(),(0,r.createElementBlock)("button",{key:0,onClick:t[2]||(t[2]=function(){return we.clearSelection&&we.clearSelection.apply(we,arguments)}),class:"btn btn-danger text-white"},B)):(0,r.createCommentVNode)("",!0)]),D,(0,r.createElementVNode)("div",null,[(0,r.createElementVNode)("p",null,[C,F,(0,r.createElementVNode)("u",null,(0,r.toDisplayString)(Se.selectedPoint.name||"N/A"),1)]),(0,r.createElementVNode)("p",null,[A,L,(0,r.createElementVNode)("u",null,(0,r.toDisplayString)(Se.selectedPoint.address||"N/A"),1)]),(0,r.createElementVNode)("p",null,[T,M,(0,r.createElementVNode)("u",null,(0,r.toDisplayString)(Se.selectedPoint.precision||"N/A"),1)]),(0,r.createElementVNode)("p",null,[P,j,(0,r.createElementVNode)("u",null,(0,r.toDisplayString)(Se.selectedPoint.risk_level||"N/A"),1)]),(0,r.createElementVNode)("p",null,[O,Z,(0,r.createElementVNode)("u",null,"("+(0,r.toDisplayString)(Se.selectedPoint.x.toFixed(6))+", "+(0,r.toDisplayString)(Se.selectedPoint.y.toFixed(6))+")",1)]),(0,r.createElementVNode)("p",null,[$,z,(0,r.createElementVNode)("u",null,(0,r.toDisplayString)(Se.selectedPoint.cluster_size),1)])])])])])):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("div",I,[(0,r.createElementVNode)("div",R,[(0,r.createElementVNode)("div",H,[X,Y,(0,r.createElementVNode)("table",U,[G,(0,r.createElementVNode)("tbody",null,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(Se.myData.data,(function(e){return(0,r.openBlock)(),(0,r.createElementBlock)("tr",{key:e.id},[(0,r.createElementVNode)("td",null,(0,r.toDisplayString)(e.name||"N/A"),1),(0,r.createElementVNode)("td",null,(0,r.toDisplayString)(e.address||"N/A"),1),(0,r.createElementVNode)("td",null,(0,r.toDisplayString)(e.precision||"N/A"),1),(0,r.createElementVNode)("td",null,(0,r.toDisplayString)(e.risk_level||"N/A"),1),(0,r.createElementVNode)("td",null,"("+(0,r.toDisplayString)(e.x.toFixed(6))+", "+(0,r.toDisplayString)(e.y.toFixed(6))+")",1)])})),128))])])])])])])):(0,r.createCommentVNode)("",!0),"table"===Se.tab_selected?((0,r.openBlock)(),(0,r.createElementBlock)("div",W,[(0,r.createElementVNode)("div",q,[(0,r.createElementVNode)("div",J,[(0,r.createElementVNode)("div",K,[Q,ee,(0,r.createElementVNode)("table",te,[ne,(0,r.createElementVNode)("tbody",null,[((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(Se.myData.data,(function(e){return(0,r.openBlock)(),(0,r.createElementBlock)("tr",{key:e.id},[(0,r.createElementVNode)("td",null,(0,r.toDisplayString)(e.name||"N/A"),1),(0,r.createElementVNode)("td",null,(0,r.toDisplayString)(e.address||"N/A"),1),(0,r.createElementVNode)("td",null,(0,r.toDisplayString)(e.precision||"N/A"),1),(0,r.createElementVNode)("td",null,(0,r.toDisplayString)(e.risk_level||"N/A"),1),(0,r.createElementVNode)("td",null,"("+(0,r.toDisplayString)(e.x.toFixed(6))+", "+(0,r.toDisplayString)(e.y.toFixed(6))+")",1)])})),128))])])])])])])):(0,r.createCommentVNode)("",!0)]),Se.filter?((0,r.openBlock)(),(0,r.createBlock)(_e,{key:0,onCloseFilter:t[12]||(t[12]=function(e){return Se.filter=!1}),title:"HEATMAP FILTERS"},{default:(0,r.withCtx)((function(){return[re,le,"Provincial"===n.auth.user.level?((0,r.openBlock)(),(0,r.createElementBlock)("span",oe,[ae,ie,(0,r.withDirectives)((0,r.createElementVNode)("select",{class:"form-control","onUpdate:modelValue":t[3]||(t[3]=function(e){return Se.mun=e}),onChange:t[4]||(t[4]=function(e){return we.filter_me("mun")})},[ce,((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(n.municipalities,(function(e){return(0,r.openBlock)(),(0,r.createElementBlock)("option",null,(0,r.toDisplayString)(e),1)})),256))],544),[[r.vModelSelect,Se.mun]])])):(0,r.createCommentVNode)("",!0),se,ue,(0,r.withDirectives)((0,r.createElementVNode)("select",{class:"form-control","onUpdate:modelValue":t[5]||(t[5]=function(e){return Se.bar=e}),onChange:t[6]||(t[6]=function(e){return we.filter_me("bar")})},[de,((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(n.barangays,(function(e){return(0,r.openBlock)(),(0,r.createElementBlock)("option",null,(0,r.toDisplayString)(e),1)})),256))],544),[[r.vModelSelect,Se.bar]]),me,pe,(0,r.withDirectives)((0,r.createElementVNode)("select",{class:"form-control","onUpdate:modelValue":t[7]||(t[7]=function(e){return Se.pur=e}),onChange:t[8]||(t[8]=function(e){return we.filter_me("pur")})},[he,((0,r.openBlock)(!0),(0,r.createElementBlock)(r.Fragment,null,(0,r.renderList)(n.puroks,(function(e){return(0,r.openBlock)(),(0,r.createElementBlock)("option",null,(0,r.toDisplayString)(e),1)})),256))],544),[[r.vModelSelect,Se.pur]]),fe,Ne,(0,r.withDirectives)((0,r.createElementVNode)("select",{class:"form-control","onUpdate:modelValue":t[9]||(t[9]=function(e){return Se.relrisk=e}),onChange:t[10]||(t[10]=function(e){return we.filter_me("relrisk")})},be,544),[[r.vModelSelect,Se.relrisk]]),Ee,(0,r.createElementVNode)("button",{class:"btn btn-danger text-white",onClick:t[11]||(t[11]=function(){return we.clearFilter&&we.clearFilter.apply(we,arguments)})},"Clear Filters"),Ve,(0,r.createElementVNode)("span",null,[ge,ye,ve,(0,r.createElementVNode)("u",null,(0,r.toDisplayString)(e.format_number(n.count,0,!0)),1)])]})),_:1})):(0,r.createCommentVNode)("",!0),ke])])])}],["__scopeId","data-v-202e1c64"]])},8687:(e,t,n)=>{n.d(t,{Z:()=>f});var r=n(821),l={id:"sidebar-wrapper",class:"sidebar-nav nav navbar-inverse"},o={class:"row",style:{width:"380px"}},a={class:"bgc-white"},i={class:"modal-header"},c={class:"modal-title",id:"exampleModalLiveLabel"},s={class:"modal-body"};const u={props:{title:String}};var d=n(3379),m=n.n(d),p=n(1563),h={insert:"head",singleton:!1};m()(p.Z,h);p.Z.locals;const f=(0,n(3744).Z)(u,[["render",function(e,t,n,u,d,m){return(0,r.openBlock)(),(0,r.createElementBlock)("div",l,[(0,r.createElementVNode)("div",o,[(0,r.createElementVNode)("div",a,[(0,r.createElementVNode)("div",i,[(0,r.createElementVNode)("h5",c,(0,r.toDisplayString)(n.title),1),(0,r.createElementVNode)("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=function(t){return e.$emit("closeFilter")})})]),(0,r.createElementVNode)("div",s,[(0,r.renderSlot)(e.$slots,"default")])])])])}]])}}]);